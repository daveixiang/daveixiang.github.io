<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Clang print self | 項 思 偉 ~ Aal Izz Well!</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/xin">Home</a></li>
      
      <li><a href="/">Articles</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Clang print self</span></h1>
</div>

<main>
<ul>
<li>print-self.c</li>
</ul>

<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

extern char * _binary_print_self_c_start;  
int main()  
{
        printf(&quot;%s&quot;, (char *)&amp;_binary_print_self_c_start);  
}
</code></pre>

<p>and generate <em>print-self.bin</em></p>

<pre><code class="language-bash">objcopy -I binary -O  elf64-x86-64 -B i386:x86-64  print-self.c print-self.bin
</code></pre>

<ul>
<li>print-self.bin</li>
</ul>

<pre><code class="language-bash">readelf --sym print-self.bin
</code></pre>

<p>and the symbols is like:</p>

<pre><code class="language-text">Symbol table '.symtab' contains 5 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND 
     1: 0000000000000000     0 SECTION LOCAL  DEFAULT    1 
     2: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT    1 _binary_print_self_c_star
     3: 000000000000009b     0 NOTYPE  GLOBAL DEFAULT    1 _binary_print_self_c_end
     4: 000000000000009b     0 NOTYPE  GLOBAL DEFAULT  ABS _binary_print_self_c_size
</code></pre>

<ul>
<li>print-self</li>
</ul>

<pre><code class="language-bash">gcc -o print-self print-self.c print-self.bin
</code></pre>

<p>and check the output:</p>

<pre><code class="language-text">davei@davei:/tmp&gt; ./print-self 
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

extern char * _binary_print_self_c_start;  
int main()  
{
        printf(&quot;%s&quot;, (char *)&amp;_binary_print_self_c_start);  
}
</code></pre>

</main>

  <footer>
  
  
  <hr/>
  &copy; [項思偉] 2017 | <a href="https://github.com/daveixiang">Github</a>
  
  </footer>
  </body>
</html>

