<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Clang print self | 項 思 偉 ~ Aal Izz Well!</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <header>

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://siweixiang.github.io//xin">項 思 偉 ~ aal izz well!</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/">~/筆記</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/categories/">~/分類</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/tags/">~/標籤</a>
      </li>
      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">Clang print self</span></h1>

<h2 class="date">2017/06/05</h2>
<p class="terms">
  
  
  Categories: <a href="/categories/clan">clan</a> 
  
  
  
  Tags: <a href="/tags/clan">clan</a> <a href="/tags/tips">tips</a> 
  
  
</p>
</div>



<main>
<ul>
<li>print-self.c</li>
</ul>

<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

extern char * _binary_print_self_c_start;  
int main()  
{
        printf(&quot;%s&quot;, (char *)&amp;_binary_print_self_c_start);  
}
</code></pre>

<p>and generate <em>print-self.bin</em></p>

<pre><code class="language-bash">objcopy -I binary -O  elf64-x86-64 -B i386:x86-64  print-self.c print-self.bin
</code></pre>

<ul>
<li>print-self.bin</li>
</ul>

<pre><code class="language-bash">readelf --sym print-self.bin
</code></pre>

<p>and the symbols is like:</p>

<pre><code class="language-text">Symbol table '.symtab' contains 5 entries:
   Num:    Value          Size Type    Bind   Vis      Ndx Name
     0: 0000000000000000     0 NOTYPE  LOCAL  DEFAULT  UND 
     1: 0000000000000000     0 SECTION LOCAL  DEFAULT    1 
     2: 0000000000000000     0 NOTYPE  GLOBAL DEFAULT    1 _binary_print_self_c_star
     3: 000000000000009b     0 NOTYPE  GLOBAL DEFAULT    1 _binary_print_self_c_end
     4: 000000000000009b     0 NOTYPE  GLOBAL DEFAULT  ABS _binary_print_self_c_size
</code></pre>

<ul>
<li>print-self</li>
</ul>

<pre><code class="language-bash">gcc -o print-self print-self.c print-self.bin
</code></pre>

<p>and check the output:</p>

<pre><code class="language-text">davei@davei:/tmp&gt; ./print-self 
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;

extern char * _binary_print_self_c_start;  
int main()  
{
        printf(&quot;%s&quot;, (char *)&amp;_binary_print_self_c_start);  
}
</code></pre>

</main>

    <footer>
      
<script async src="//yihui.name/js/center-img.js"></script>

      
      <hr/>
      &copy; [項思偉] 2017 | <a href="https://github.com/siweixiang">Github</a>
      
    </footer>
  </body>
</html>

