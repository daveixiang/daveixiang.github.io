<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <title>Install Openstack from source code dependences (mitaka) | 項 思 偉 ~ Aal Izz Well!</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/xin">Home</a></li>
      
      <li><a href="/">Articles</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Install Openstack from source code dependences (mitaka)</span></h1>
</div>

<main>
<pre><code class="language-bash">#!/bin/bash

function gen_pkg_deps()
{
  [ -z &quot;$@&quot; ] &amp;&amp; exit 0;
  yum install  --assumeno &quot;$@&quot; | \
  sed -n '/Installing for dependencies:/,/Transaction Summary/p' | \
  sed -e '/^=.*?$/d' \
  -e '/Installing:/d'  \
  -e '/Installing for dependencies:/d' \
  -e '/Transaction Summary/d' \
  -e '/Updating/d' \
  -e '/^$/d' | \
awk 'BEGIN {n=1;arr[0]=0}

{
if (NF != 6)
{
    for (i=n; i&lt;=n+NF-1;i++)
arr[i] = $(i-n+1)
    n+=NF;
    if (n == 7)
    {
printf &quot;%s,%s,%s,%s\n&quot;, arr[1], arr[2], arr[3], arr[4]
for (i=1; i&lt;n;i++) del arr[i]
n=1
    }
}
else
{
    printf &quot;%s,%s,%s,%s\n&quot;,  $1, $2, $3, $4
}
}' | sort | grep -v -E -e 'glance|keystone|nova|neutron|swift|cinder|ceilometer'\
  &gt; &quot;$@&quot;-deps.log 2&gt;&amp;1
}


OPENSTACK_COMPONENTS=&quot;
openstack-keystone \
python-keystoneclient \
python-keystone \
python-openstackclient \
openstack-glance \
python-glanceclient \
python-glance \
openstack-nova-api \
openstack-nova-conductor \
openstack-nova-console \
openstack-nova-novncproxy \
openstack-nova-scheduler \
python-novaclient \
python-nova \
openstack-nova-compute \
openstack-neutron \
openstack-neutron-ml2 \
python-neutronclient \
python-neutron \
openstack-ceilometer-api \
openstack-ceilometer-collector \
openstack-ceilometer-notification \
openstack-ceilometer-central \
openstack-ceilometer-alarm \
openstack-ceilometer-compute \
python-ceilometerclient \
python-ceilometer \
openstack-cinder
&quot;

for component in $OPENSTACK_COMPONENTS
do
  gen_pkg_deps $component
done
</code></pre>

</main>

  <footer>
  
  
  <hr/>
  &copy; [項思偉] 2017 | <a href="https://github.com/daveixiang">Github</a>
  
  </footer>
  </body>
</html>

