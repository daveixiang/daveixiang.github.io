<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Compile OpenvSwitch 2.5.x LTS from source code | 項 思 偉 ~ Aal Izz Well!</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <header>

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://siweixiang.github.io//xin">項 思 偉 ~ aal izz well!</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/">~/筆記</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/categories/">~/分類</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/tags/">~/標籤</a>
      </li>
      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">Compile OpenvSwitch 2.5.x LTS from source code</span></h1>

<h2 class="date">2017/01/14</h2>
<p class="terms">
  
  
  Categories: <a href="/categories/virtualization">virtualization</a> 
  
  
  
  Tags: <a href="/tags/openvswitch">openvswitch</a> 
  
  
</p>
</div>



<main>


<h1 id="install-compile-dependencies">Install compile dependencies</h1>

<h1 id="configure-and-compile-the-source-code">Configure and compile the source code</h1>

<pre><code class="language-bash">./configure --with-linux=/lib/modules/$(uname -r)/build --prefix=/go/ovs

make -j$(nproc)

make install &amp;&amp; make modules_install
</code></pre>

<h1 id="load-openvswitch-module">Load OpenvSwitch module</h1>

<pre><code class="language-bash">modprobe gre
modprobe openvswitch
modprobe libcrc32c
</code></pre>

<h1 id="configure-ovsdb">Configure ovsdb</h1>

<pre><code class="language-bash">/go/ovs/bin/ovsdb-tool create /go/ovs/etc/openvswitch/conf.db /go/ovs/share/openvswitch/vswitch.ovsschema
</code></pre>

<h1 id="start-ovs">Start OVS</h1>

<h2 id="start-ovsdb-server">Start ovsdb-server</h2>

<ul>
<li><p>without ssl</p>

<pre><code class="language-bash">/go/ovs/sbin/ovsdb-server --remote=punix:/go/ovs/var/run/openvswitch/db.sock \
--remote=db:Open_vSwitch,Open_vSwitch,manager_options \
--pidfile --detach --log-file
</code></pre></li>

<li><p>with ssl</p>

<pre><code class="language-bash">/go/ovs/sbin/ovsdb-server --remote=punix:/go/ovs/var/run/openvswitch/db.sock \
--remote=db:Open_vSwitch,Open_vSwitch,manager_options \
--private-key=db:Open_vSwitch,SSL,private_key \
--certificate=db:Open_vSwitch,SSL,certificate \
--bootstrap-ca-cert=db:Open_vSwitch,SSL,ca_cert \
--pidfile --detach --log-file
</code></pre></li>
</ul>

<p>View /go/ovs/var/log/openvswitch/ovsdb-server.log to get server status</p>

<h2 id="init-ovs">Init OVS</h2>

<pre><code class="language-bash">/go/ovs/bin/ovs-vsctl --no-wait init
</code></pre>

<p>View /go/ovs/var/log/openvswitch/ovs-vswitchd.log to get ovs-switchd status</p>

<h2 id="start-ovs-switchd">Start ovs-switchd</h2>

<pre><code class="language-bash">/go/ovs/sbin/ovs-vswitchd --pidfile --detach --log-file
</code></pre>

</main>

    <footer>
      
<script async src="//yihui.name/js/center-img.js"></script>

      
      <hr/>
      &copy; [項思偉] 2017 | <a href="https://github.com/siweixiang">Github</a>
      
    </footer>
  </body>
</html>

