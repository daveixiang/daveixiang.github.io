<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Compile Golang from source code | 項 思 偉 ~ Aal Izz Well!</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    <header>

  
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <nav>
    <ul>
      
      
      <li class="pull-left ">
        <a href="https://siweixiang.github.io//xin">項 思 偉 ~ aal izz well!</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/">~/筆記</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/categories/">~/分類</a>
      </li>
      
      
      <li class="pull-right ">
        <a href="/tags/">~/標籤</a>
      </li>
      

    </ul>
  </nav>
</header>

  </head>

  <body>
    <br/>

<div class="article-meta">
<h1><span class="title">Compile Golang from source code</span></h1>

<h2 class="date">2017/01/12</h2>
<p class="terms">
  
  
  Categories: <a href="/categories/golang">golang</a> 
  
  
  
  Tags: <a href="/tags/golang">golang</a> 
  
  
</p>
</div>



<main>


<h1 id="introduction">Introduction</h1>

<p>Go is a nice language started by Google. A nice advantage is that it
compiles to native code and the binary does not have additional
dependencies. Performance and low resource usage are focused on, even
though I personally don&rsquo;t like the gargabe collection based memory
cleanup.</p>

<h1 id="installation">Installation</h1>

<h2 id="first-start-with-go-1-4">First start with Go 1.4</h2>

<p>Since Go version 1.5 you need Go itself to compile it. So we first
start with Go 1.4:</p>

<ul>
<li><p>Download <a href="https://storage.googleapis.com/golang/go1.4.3.src.tar.gz">go1.4.3.src.tar.gz</a></p></li>

<li><p>Untar it to <em>/go/go1.4/</em> directory:</p></li>
</ul>

<pre><code class="language-bash">tar zxf go1.4.3.src.tar.gz -C /go

cd /go

mv go go1.4
</code></pre>

<ul>
<li>Build Go 1.4 with:</li>
</ul>

<pre><code class="language-bash">cd /go/go1.4/src

./make.bash
</code></pre>

<p>After some minutes you have a working Go 1.4 installation.</p>

<p>If get the following error:</p>

<pre><code class="language-txt">cannot load DWARF output from $WORK/os/user/_obj//_cgo_.o: decoding dwarf section info at offset 0x4: unsupported version 0
</code></pre>

<p>Using Go 1.4 to bootstrap a later version, disable cgo with:</p>

<pre><code class="language-bash">env CGO_ENABLED=0 ./make.bash
</code></pre>

<h2 id="compile-the-current-version-go1-7-5">Compile the current version (go1.7.5)</h2>

<ul>
<li><p>Download <a href="https://storage.googleapis.com/golang/go1.7.5.src.tar.gz">go1.7.5.src.tar.gz</a></p></li>

<li><p>Untar it to <em>/go/go1.7</em> directory:</p></li>
</ul>

<pre><code class="language-bash">tar zxf go1.7.5.src.tar.gz -C /go

cd /go

mv go go1.7
</code></pre>

<ul>
<li>Tell Go where to find the Go compiler to bootstrap with:</li>
</ul>

<pre><code class="language-bash">export GOROOT_BOOTSTRAP=/go/go1.4
</code></pre>

<ul>
<li>Now build Go 1.7:</li>
</ul>

<pre><code class="language-bash">cd /go/go1.7/src

./make.bash
</code></pre>

<p>After some more minutes, we finally have working Go 1.7 installation.</p>

<h2 id="set-up-environment-variables-for-convenience">Set up environment variables for convenience</h2>

<ul>
<li>Set the root of the Go installation:</li>
</ul>

<pre><code class="language-bash">export GOROOT=/go/go1.7
</code></pre>

<ul>
<li>Tell go where to store additional packages downloaded with &ldquo;go get&rdquo;:</li>
</ul>

<pre><code class="language-bash">export GOPATH=&lt;path/to/addons&gt;
</code></pre>

<ul>
<li>And finally add the bin directory to your PATH:</li>
</ul>

<pre><code class="language-bash">export PATH=$PATH:$GOROOT/bin
</code></pre>

<h1 id="test-the-golang-compiler">Test the Golang compiler</h1>

<ul>
<li>Create a file &ldquo;hello.go&rdquo; with content</li>
</ul>

<pre><code class="language-go">package main
import &quot;fmt&quot;
func main() {
        fmt.Println(&quot;Hello World&quot;)
}
</code></pre>

<ul>
<li>Compile the sample code:</li>
</ul>

<pre><code class="language-bash">go build hello.go
</code></pre>

<ul>
<li>Run with:</li>
</ul>

<pre><code class="language-bash">./hello
</code></pre>

</main>

    <footer>
      
<script async src="//yihui.name/js/center-img.js"></script>

      
      <hr/>
      &copy; [項思偉] 2017 | <a href="https://github.com/siweixiang">Github</a>
      
    </footer>
  </body>
</html>

